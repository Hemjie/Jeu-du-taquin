<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle</title>
    <link rel="stylesheet" href="puzzle.css">
</head>
<body>
    <!--On va essayer de créer un Taquin (numéros) en Javascript / jQuery
        http://www.artbylogic.com/puzzles/numSlider/numberShuffle.htm
        
        On devra utiliser GitHub. Voici la liste des fonctionnalités à implémenter:
        1 - Créer l'apparence du jeu avec des cases. On va commencer par un 4 par 4.
            Il faut donc avoir 15 carrés numérotés et une zone vide.
        2 - Pouvoir cliquer sur un carré et le positionner à la place de la zone vide.
            Chaque carré doit être positionné (en relatif ou absolu) par rapport à la zone complète du jeu (top et left).
        3 - Mélanger le jeu aléatoirement à chaque rafraîchissement.
        4 - Autoriser uniquement le déplacement d'un carré qui est à côté de la zone vide(positions en JS).
        BONUS: Compter les déplacement en temps réel
        BONUS: Ajouter un chronomètre et détecter la fin de la partie
        BIG BONUS: Adapter le jeu pour que cela fonctionne avec une image (On peut découper une image avec un background image et un background position)
        BONUS: On arrive sur le jeu, on voit l'image complète, on clique sur jouer, elle se mélange, le chrono se déclenche. On pourra également recommencer la partie.
        -->

        <div class="page">
            <div class="container">
                <h1>Le jeu du Taquin</h1>
                <div class="flex game">
                    <div class="square square-1">1</div>
                    <div class="square square-2">2</div>
                    <div class="square square-3">3</div>
                    <div class="square square-4">4</div>
                    <div class="square square-5">5</div>
                    <div class="square square-6">6</div>
                    <div class="square square-7">7</div>
                    <div class="square square-8">8</div>
                    <div class="square square-9">9</div>
                    <div class="square square-10">10</div>
                    <div class="square square-11">11</div>
                    <div class="square square-12">12</div>
                    <div class="square square-13">13</div>
                    <div class="square square-14">14</div>
                    <div class="square square-15">15</div>
                    <div class="square square-16"></div>
                </div>
                <div class="counter">Nombre de déplacements: 0</div>
                <div class="time">Temps : 0h 0m 0s</div>
            </div>
        </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script>
        var topList = [0, 100, 200, 300];
        var leftList = [0, 100, 200, 300];
        var indiceList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16];
        var randomIndice = 0;

        for (var t = 0; t < topList.length; t++) {
            for (var l = 0; l <leftList.length; l++) {
                randomIndice = Math.floor(Math.random()*(indiceList.length));
                console.log(randomIndice);
                console.log("top : " + topList[t]);
                console.log("left : " + leftList[l]);
                $(".square-"+indiceList[randomIndice]).css("top", topList[t]);
                $(".square-"+indiceList[randomIndice]).css("left", leftList[l]);
                indiceList.splice(randomIndice, 1);
                console.log(indiceList);
            }
        }
        // petit 2
        /* $(".square").click(function() {
            var top16 = $(".square-16").css("top");   //on récupère positions carré vide
            var left16 = $(".square-16").css("left");
            var square16 = $(".square-16");
            var topThis = $(this).css("top");         // on récupère positions carré cliqué
            var leftThis = $(this).css("left");
            var square = $(this);

            square.css("top", top16);                //interversion des positions et donc des carrés
            square.css("left", left16);
            square16.css("top", topThis);
            square16.css("left", leftThis); 
        }); */

        
        var counter = 0;
        var clic = 0;
        var seconds = 0;
        var minutes = 0;
        var hours = 0;

        // Bonus chrono
        setInterval(function () {
            seconds++;      
            if (seconds == 60) {
                ++minutes;
                seconds = 0;
            }
            if (minutes == 60) {
                ++hours;
                minutes = 0;
            }
            $(".time").text("Temps: " + hours +"h " + minutes+ "m " + seconds + "s");
        },1000);

        if (hours < 10) {
                hours = "0" + hours;
            };
            if (minutes < 10) {
                minutes = "0" + minutes;
            }
            if (seconds < 10) {
                seconds = "0" + seconds;
            }
        // partie 4
        $(".square").click(function() {
            var top16 = $(".square-16").css("top");   //on récupère positions carré vide
            var left16 = $(".square-16").css("left");
            var square16 = $(".square-16");
            var topThis = $(this).css("top");
            var leftThis = $(this).css("left");         // on récupère positions carré cliqué
            var ecartTop = Math.abs(parseInt(top16) - parseInt(topThis));
            var ecartLeft = Math.abs(parseInt(left16) - parseInt(leftThis));
            var ecart = ecartTop + ecartLeft;

            if (ecart == 100) {
                var leftThis = $(this).css("left");
                var square = $(this);

                square.css("top", top16);                //interversion des positions et donc des carrés
                square.css("left", left16);
                square16.css("top", topThis);
                square16.css("left", leftThis); 
                //bonus 1 nb de déplacements
                $(".counter").text("Nombre de déplacements : " + ++counter);
            };
        });
        

    </script>
</body>
</html>
